{
  "version": 3,
  "file": "foia-request.css",
  "sources": [
    "../../precompiles/svelte/foia-request/App.svelte",
    "../../precompiles/svelte/foia-request/Recipient.svelte",
    "../../precompiles/svelte/foia-request/RecipientField.svelte",
    "../../precompiles/svelte/foia-request/Request.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport {recipients, count, start} from \"./store.js\";\n\timport Recipient from \"./Recipient.svelte\";\n\timport Request from \"./Request.svelte\";\n\tlet states = fetch(\"/api/current-user/states\")\n        .then(response => response.json())\n        .then(data => data.states)\n        .catch(e => {console.error(e);});\n</script>\n<div class=\"form__container\">\n\t<div class=\"section__container\">\n\t\t<h2>Information about the Request</h2>\n\t\t<Request/>\n\t</div>\n\t<div class=\"section__container\">\n\t\t<h2>Information about the Recipients</h2>\n\t\t{#each $recipients as _recipient, idx}\n\t\t\t<Recipient states={states} idx=\"{idx}\"/>\n\t\t{/each}\n\t\t<input type=\"hidden\" name=\"num-items\" value=\"{$count}\">\n\t</div>\n</div>\n\n\n<style>\n\t.form__container {\n\t\tmax-width: 95%;\n\t\tmargin:auto;\n\t}\n\n\t.section__container {\n\t\tborder: 1px solid rgb(170,170,170);\n\t\tborder-radius: 2px;\n\t\tpadding: 5px;\n\t\tmargin-bottom: 5px;\n\t\tbackground-color: rgb(240,240,240);\n\t\tfont-size: 1.2rem;\n\t}\n\n\th2 {\n\t\ttext-align: center;\n\t}\n\n\t@media screen and (min-width: 600px) {\n        .form__container {\n            width: 65%;\n        }\n    }\n</style>",
    "<script>\n    import { recipients, count } from \"./store.js\";\n    import RecipientField from \"./RecipientField.svelte\";\n    \n    export let idx = 0;\n\n    let currentTemplate = \"\";\n\n    let startUrl = \"/api/current-user/\";\n    export let states;\n    \n\n    function getTemplateInfo() {\n        let templateData = {};\n        const selected = document.getElementById(`recipient-${idx}`);\n        const generalText = document.getElementById(\"request\")\n            .getElementsByTagName(\"textarea\");\n        const generalSubject = document.getElementById(\"request\")\n            .getElementsByTagName(\"input\");\n        const recipText = selected.getElementsByTagName(\"input\");\n        const recipSelect = selected.getElementsByTagName(\"select\");\n        const allTags = [...generalText, ...generalSubject, ...recipText, ...recipSelect];\n        for (let elem of allTags) {\n            const elemKey = elem.id.replace(\"id_\", \"\").replace(`-${idx}`, \"\");\n            templateData[elemKey] = elem.value;\n        }\n        return templateData;\n    }\n\n    function fillTemplate(jsonData, templateData) {\n        let lastIdx = 0;\n        let templateText = \"\";\n        for (let tag of templateData.template) {\n            templateText += templateData.boilerplate.slice(lastIdx, tag.position);\n            const jsonItem = jsonData[tag.field];\n            templateText += jsonItem === undefined ? templateData[tag.field] : jsonItem;\n            lastIdx = tag.position; \n        }\n        templateText += templateData.boilerplate.slice(lastIdx, templateData.boilerplate.length);\n        return templateText;\n    }\n\n    async function previewSubmission(event) {\n        const currentState = document.getElementById(`id_agencyState-${idx}`).value;\n        const templateURL = startUrl + \"template/\" + currentState;\n        const recipientData = getTemplateInfo();\n        let response = await fetch(templateURL)\n            .then(response => response.json())\n            .then(templateData => {\n                return fillTemplate(recipientData, templateData);\n            })\n            .catch((err) => {console.error(err);});\n        currentTemplate = response;\n    }\n</script>\n\n<div class=\"recipient__item\" id=\"recipient-{idx}\">\n    <div class=\"recipient__person\">\n        <RecipientField idx=\"{idx}\" fieldKey=\"recipientName\" />\n    </div>\n    <div class=\"agency__general\">\n        <RecipientField idx=\"{idx}\" fieldKey=\"agencyName\" />\n        <RecipientField idx=\"{idx}\" fieldKey=\"foiaEmail\" fieldType=\"email\" required={true}/>\n        {#await states then options}\n        <RecipientField idx=\"{idx}\" fieldKey=\"agencyState\" fieldType=\"select\" required={true} options={options} />\n        {/await}\n    </div>\n    <div class=\"agency__street\">\n        <RecipientField idx=\"{idx}\" fieldKey=\"agencyStreetAddress\" />\n        <RecipientField idx=\"{idx}\" fieldKey=\"agencyZip\" />\n        <RecipientField idx=\"{idx}\" fieldKey=\"agencyMunicipality\" />\n    </div>\n    <div class=\"new__items\">\n        <div class=\"add__item\">\n            {#if idx === $count - 1 }\n            <button  id=\"add-{idx}\" on:click=\"{recipients.addItem}\">\n                <svg role=\"img\" width=\"25px\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"plus w-6 h-6\"><title>Add New Item</title><path fill-rule=\"evenodd\" d=\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\" clip-rule=\"evenodd\"></path></svg>\n            </button>\n            {/if}\n        </div>\n        <div class=\"delete__item\">\n            {#if $count > 1}\n            <button id=\"delete-{idx}\" on:click=\"{recipients.deleteItem(idx)}\">\n                <svg role=\"img\" width=\"25px\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"x w-6 h-6\"><title>Delete This Item</title><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg>\n            </button>\n            {/if}\n        </div>\n    </div>\n    <div class=\"expand__preview\">\n        <button id=\"expand-{idx}\" on:click=\"{previewSubmission}\">Preview Request</button>\n        <div id=\"template-{idx}\" class=\"template__preview\">\n            {currentTemplate}\n        </div>\n    </div>\n</div>\n\n<style>\n    .recipient__item {\n        border: 1px dashed rgb(207,207,207);\n        border-radius: 5px;\n        padding: 10px;\n        display: flex;\n        flex-direction: column;\n        margin-bottom: 10px;\n        color: black;\n    }\n\n    .agency__general, .agency__street {\n        display: flex;\n    }\n\n    .new__items {\n        display: flex;\n        justify-content: space-between;\n    }\n\n    button {\n        border-radius: 25px;\n        border: 2px solid black;\n        cursor: pointer;\n        background-color: rgba(255,202,122,1);\n    }\n\n    button:hover, button:focus {\n        background-color: #C27400;\n        color: white;\n        border-color: transparent   ;\n    }\n\n    .template__preview {\n        white-space: pre-wrap;\n    }\n</style>",
    "<script>\nimport { each } from \"svelte/internal\";\n    import { recipients, start } from \"./store.js\";\n\n    export let idx = 0;\n    export let fieldKey = \"recipientName\";\n    export let fieldType = \"text\";\n    export let options = [];\n    export let required = false;\n    let autocompleteSelected;\n    let agencies = [];\n    // just show top 5 agencies\n    $: firstAgencies = agencies.slice(0, 5);\n\n    $: idField = `id_${fieldKey}-${idx}`;\n    $: autocompleteField = `autocomplete_${fieldKey}-${idx}`;\n    $: nameField = `${fieldKey}-${idx}`;\n    $: fieldVal = $recipients[idx][fieldKey].value;\n    $: selectVal = (fieldType === \"select\" && options.length > 0 && fieldVal === \"\") ? options[0].abbr : fieldVal;\n\n    async function updateAndQuery(event) {\n        updateStore(event);\n        let agencyUrl;\n        if (fieldKey.startsWith(\"agency\") || fieldKey === \"foiaEmail\") {\n            agencyUrl = \"/api/current-user/autocomplete/agencies\";\n        } else {\n\n        }\n        const agencyResults = await fetch(`${agencyUrl}?field=${fieldKey}&q=${event.target.value}`)\n            .then(response => response.json())\n            .then(data => data.results)\n            .catch((err) => {console.error(err);});\n        agencies = event.target.value === \"\" ? [] : agencyResults;\n    }\n\n    function updateStore(event) {\n        const newVal = event.target.value;\n        recipients.changeItem($recipients, idx, fieldKey, newVal);\n    }\n\n    function autocompleteKeydown(event) {\n        switch(event.key) {\n            case \"ArrowDown\":\n                if (autocompleteSelected === undefined) {\n                    autocompleteSelected = 0;\n                } else if (autocompleteSelected < firstAgencies.length - 1) {\n                    autocompleteSelected += 1;\n                } else {\n                    autocompleteSelected = undefined;\n                }\n                break;\n            case \"ArrowUp\":\n                if (autocompleteSelected === undefined) {\n                    autocompleteSelected = firstAgencies.length - 1;\n                } else if (autocompleteSelected === 0) {\n                    autocompleteSelected = undefined;\n                } else {\n                    autocompleteSelected -= 1;\n                }\n                break;\n            case \"Enter\":\n                if (autocompleteSelected !== undefined) {\n                    updateData();\n                }\n                break;\n        }\n    }\n\n    function autocompleteClick(event) {\n        autocompleteSelected = parseInt(event.target.id.match(/[0-9]$/g));\n        updateData();\n    }\n\n    function updateData() {\n        const selectedItem = firstAgencies[autocompleteSelected];\n        for (let inputField of Object.keys(selectedItem)) {\n            document.getElementById(`id_${inputField}-${idx}`).value = selectedItem[inputField];\n        }\n        agencies = [];\n        autocompleteSelected = undefined;\n    }\n</script>\n\n<div class=\"form__field\">\n    <label for=\"{idField}\">{start[fieldKey].text}<span class:optional={!required} class:required={required}></span></label>\n    {#if fieldType === \"select\"}\n    <select on:blur=\"{updateStore}\" id=\"{idField}\" name=\"{nameField}\" value={selectVal}>\n        {#each options as option}\n        <option value=\"{option.abbr}\">{option.name}</option>\n        {/each}\n    </select>\n    {:else}\n    <div class=\"text__container\">\n        {#if firstAgencies.length > 0}\n        <div class=\"sr-only\" role=\"status\" aria-live=\"polite\">\n            There are {firstAgencies.length} matching agencies. Use the arrow keys to browse.\n        </div>\n        {/if}\n        <input on:keydown=\"{autocompleteKeydown}\" on:input=\"{updateAndQuery}\" list=\"{autocompleteField}\" id=\"{idField}\" name=\"{nameField}\" value={fieldVal} autocomplete=\"off\" aria-autocomplete=\"list\">\n        <div class=\"autocomplete__results\">\n            <div class=\"autocomplete__list\" role=\"listbox\" tabindex=\"0\">\n                {#each firstAgencies as agency, i}\n                {#if autocompleteSelected === i}\n                <div on:click=\"{autocompleteClick}\" class=\"autocomplete__item selected\" aria-selected=\"true\" id=\"{`${autocompleteField}-${i}`}\" role=\"option\" tabindex=\"-1\">{agency[\"agencyName\"]}</div>\n                {:else}\n                <div on:click=\"{autocompleteClick}\" class=\"autocomplete__item\" id=\"{`${autocompleteField}-${i}`}\" role=\"option\" tabindex=\"-1\">{agency[\"agencyName\"]}</div>\n                {/if}\n                {/each}\n            </div>\n        </div>\n    </div>\n    {/if}\n</div>\n\n<style>\n    .form__field {\n        width: 33%;\n    }\n\n    input, select {\n        width: 95%;\n        margin-top: 5px;\n        border-radius: 7px;\n    }\n\n    select {\n        background-image: url(\"../images/down-arrow.svg\");\n        background-repeat: no-repeat;\n        background-position: 100% 50%;\n        appearance: none;\n        -moz-appearance: none;\n        -webkit-appearance: none;\n    }\n\n    input:focus, select:focus {\n        background-color: rgb(217,217,217);\n        border-color: #CE6969;\n    } \n\n    label {\n        font-weight: bold;\n    }\n\n    :global(span.optional) {\n        color: rgb(103,103,103);\n        font-weight: normal;\n    }\n\n    :global(span.required) {\n        color: #CE6969;\n    }\n\n    :global(span.optional::after) {\n        content: \" (Optional)\";\n    }\n\n    :global(span.required::after) {\n        content: \" (Required)\";\n    }\n\n    .selected, .autocomplete__item:hover, .autocomplete__item:focus {\n        background-color: rgb(187,187,187);\n    }\n\n    .autocomplete__item:hover, .autocomplete__item:focus {\n        cursor: pointer;\n    }\n</style>",
    "<script>\n\n    let subject = \"\";\n    let requestedRecords = \"\";\n    let expeditedProcessing = \"\";\n    let feeWaiver = \"\";\n\n    function adjustHeight(event) {\n\t\tconst elem = event.target;\n\t\t// change the height of element if it overflows\n\t\tif (elem.clientHeight < elem.scrollHeight) {\n\t\t\telem.style.height = elem.scrollHeight + 20 + \"px\";\n\t\t} \n\t}\n\n</script>\n\n<div id=\"request\" class=\"request__container\">\n\t<div class=\"subject__line\">\n        <label for=\"id_subject-line\">Subject<span class=\"required\"></span></label>\n        <input bind:value=\"{subject}\" type=\"text\" id=\"id_subject\" name=\"subject\">\n    </div>\n    <div class=\"records\">\n        <label for=\"id_requestedRecords\">Records Sought<span class=\"required\"></span></label>\n        <textarea on:input=\"{adjustHeight}\" bind:value=\"{requestedRecords}\" id=\"id_requestedRecords\" name=\"requestedRecords\"></textarea>\n    </div>\n    <div class=\"fee-waiver\">\n        <label for=\"id_feeWaiver\">Fee Waiver Justification<span class=\"optional\"></span></label>\n        <textarea on:input=\"{adjustHeight}\" bind:value=\"{feeWaiver}\" id=\"id_feeWaiver\" name=\"feeWaiver\"></textarea>\n    </div>\n    <div class=\"expedited-processing\">\n        <label for=\"id_expeditedProcessing\">Justification for Expedited Processing<span class=\"optional\"></span></label>\n        <textarea on:input=\"{adjustHeight}\" bind:value=\"{expeditedProcessing}\" id=\"id_expeditedProcessing\" name=\"expeditedProcessing\"></textarea>\n    </div>\n</div>\n\n<style>\n    .request__container {\n        padding: 10px;\n        margin-bottom: 10px;\n        background-color: #CFC9D4;\n        border-radius: 5px;\n    }\n\n    textarea {\n        resize: none;\n        overflow: hidden;\n        box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        width: 80%;\n    }\n\n    input, textarea {\n        border-radius: 5px;\n        text-align: left;\n        font-size: 1.2rem;\n    }\n\n    input:focus, textarea:focus {\n        border-color: #9900ff;\n        background-color: rgb(217,217,217);\n    }\n\n    label {\n        color: black;\n        font-weight: bold;\n        margin-bottom: 2px;\n        font-size: 1.2rem;\n    }\n\n    span.optional {\n        color: rgb(103,103,103);\n        font-weight: normal;\n    }\n\n    input {\n        width: 50%;\n    }\n</style>"
  ],
  "names": [],
  "mappings": "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"
}