var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function i(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function r(e,t,n){e.$$.on_destroy.push(s(t,n))}function o(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function v(){return m(" ")}function h(){return m("")}function g(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function _(e,t,n){e.classList[n?"add":"remove"](t)}let x;function w(e){x=e}function k(){if(!x)throw new Error("Function called outside component initialization");return x}const q=[],N=[],j=[],I=[],E=Promise.resolve();let L=!1;function S(e){j.push(e)}let R=!1;const A=new Set;function O(){if(!R){R=!0;do{for(let e=0;e<q.length;e+=1){const t=q[e];w(t),z(t.$$)}for(q.length=0;N.length;)N.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];A.has(t)||(A.add(t),t())}j.length=0}while(q.length);for(;I.length;)I.pop()();L=!1,R=!1,A.clear()}}function z(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const P=new Set;let T;function C(){T={r:0,c:[],p:T}}function K(){T.r||l(T.c),T=T.p}function M(e,t){e&&e.i&&(P.delete(e),e.i(t))}function F(e,t,n,l){if(e&&e.o){if(P.has(e))return;P.add(e),T.c.push(()=>{P.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function H(e,t){const n=t.token={};function l(e,l,i,c){if(t.token!==n)return;t.resolved=c;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=c);const r=e&&(t.current=e)(s);let o=!1;t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==l&&e&&(C(),F(e,1,1,()=>{t.blocks[n]=null}),K())}):t.block.d(1),r.c(),M(r,1),r.m(t.mount(),t.anchor),o=!0),t.block=r,t.blocks&&(t.blocks[l]=r),o&&O()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=k();if(e.then(e=>{w(n),l(t.then,1,t.value,e),w(null)},e=>{w(n),l(t.catch,2,t.error,e),w(null)}),t.current!==t.pending)return l(t.pending,0),!0}else{if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}var i}function W(e){e&&e.c()}function B(e,n,c){const{fragment:s,on_mount:r,on_destroy:o,after_update:a}=e.$$;s&&s.m(n,c),S(()=>{const n=r.map(t).filter(i);o?o.push(...n):l(n),e.$$.on_mount=[]}),a.forEach(S)}function J(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(q.push(e),L||(L=!0,E.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(t,i,c,s,r,o,a=[-1]){const d=x;w(t);const f=i.props||{},p=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let m=!1;if(p.ctx=c?c(t,f,(e,n,...l)=>{const i=l.length?l[0]:n;return p.ctx&&r(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),m&&Z(t,e)),n}):[],p.update(),m=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&M(t.$$.fragment),B(t,i.target,i.anchor),O()}w(d)}class U{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const V=[];function Y(t,n=e){let l;const i=[];function s(e){if(c(t,e)&&(t=e,l)){const e=!V.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),V.push(n,t)}if(e){for(let e=0;e<V.length;e+=2)V[e][0](V[e+1]);V.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(c,r=e){const o=[c,r];return i.push(o),1===i.length&&(l=n(s)||e),c(t),()=>{const e=i.indexOf(o);-1!==e&&i.splice(e,1),0===i.length&&(l(),l=null)}}}}const G={recipientFirstName:{text:"Recipient First Name",value:""},recipientLastName:{text:"Recipient Last Name",value:""},agencyName:{text:"Agency Name",value:""},foiaEmail:{text:"Public Records Email",value:""},agencyState:{text:"Agency State",value:""},agencyStreetAddress:{text:"Agency Street Address",value:""},agencyMunicipality:{text:"Agency Municipality",value:""},agencyZip:{text:"Agency ZIP Code",value:""}};Object.freeze(G);const Q=function(){const{subscribe:e,set:t,update:n}=Y([Object.assign({},G)]);return{subscribe:e,addItem:()=>n(e=>[...e,Object.assign({},G)]),deleteItem:e=>n(t=>[...t.slice(0,e),...t.slice(e+1,t.length)]),changeItem:(e,t,l,i)=>{let c=e.map((e,n)=>{if(n===t){let t={};for(const n of Object.keys(G))t[n]=Object.create(e[n]),n===l&&(t[n].value=i);return t}return e});return n(e=>c)}}}(),X=G,ee=function(t,n,c){const r=!Array.isArray(t),o=r?[t]:t,a=n.length<2;return function(e,t){return{subscribe:Y(e,t).subscribe}}(c,t=>{let c=!1;const u=[];let d=0,f=e;const p=()=>{if(d)return;f();const l=n(r?u[0]:u,t);a?t(l):f=i(l)?l:e},m=o.map((e,t)=>s(e,e=>{u[t]=e,d&=~(1<<t),c&&p()},()=>{d|=1<<t}));return c=!0,p(),function(){l(m),f()}})}(Q,e=>e.length),te=function(){const{subscribe:e,set:t,update:n}=Y([[]]);return{subscribe:e,addItem:()=>n(e=>[...e,[]]),deleteItem:e=>n(t=>[...t.slice(0,e),...t.slice(e+1,t.length)]),newSources:(e,t)=>n(n=>(n[e]=t,n))}}(),ne=Y({subject:{text:"subject",value:""},requestedRecords:{text:"Requested Records",value:""},expeditedProcessing:{text:"Expedited Processing Justification",value:""},feeWaiver:{text:"Fee Waiver Justification",value:""}});function le(e,t,n){const l=e.slice();return l[29]=t[n],l[28]=n,l}function ie(e,t,n){const l=e.slice();return l[26]=t[n],l[28]=n,l}function ce(e,t,n){const l=e.slice();return l[23]=t[n],l}function se(e){let t,n,l=e[7].length>0&&oe(e);function i(e,t){return e[6]?ue:ae}let c=i(e),s=c(e);return{c(){t=f("div"),l&&l.c(),n=v(),s.c(),$(t,"class","text__container")},m(e,i){a(e,t,i),l&&l.m(t,null),o(t,n),s.m(t,null)},p(e,r){e[7].length>0?l?l.p(e,r):(l=oe(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),c===(c=i(e))&&s?s.p(e,r):(s.d(1),s=c(e),s&&(s.c(),s.m(t,null)))},d(e){e&&u(t),l&&l.d(),s.d()}}}function re(e){let t,n,l,i=e[3],c=[];for(let t=0;t<i.length;t+=1)c[t]=ge(ce(e,i,t));return{c(){t=f("select");for(let e=0;e<c.length;e+=1)c[e].c();$(t,"id",e[8]),$(t,"name",e[10]),$(t,"class","svelte-1dw38tw")},m(i,s){a(i,t,s);for(let e=0;e<c.length;e+=1)c[e].m(t,null);b(t,e[12]),n||(l=g(t,"blur",e[15]),n=!0)},p(e,n){if(8&n){let l;for(i=e[3],l=0;l<i.length;l+=1){const s=ce(e,i,l);c[l]?c[l].p(s,n):(c[l]=ge(s),c[l].c(),c[l].m(t,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=i.length}256&n&&$(t,"id",e[8]),1024&n&&$(t,"name",e[10]),4104&n&&b(t,e[12])},d(e){e&&u(t),d(c,e),n=!1,l()}}}function oe(e){let t,n,l,i,c=e[7].length+"";return{c(){t=f("div"),n=m("There are "),l=m(c),i=m(" matching agencies. Use the arrow keys to browse."),$(t,"class","sr-only"),$(t,"role","status"),$(t,"aria-live","polite")},m(e,c){a(e,t,c),o(t,n),o(t,l),o(t,i)},p(e,t){128&t&&c!==(c=e[7].length+"")&&y(l,c)},d(e){e&&u(t)}}}function ae(e){let t,n,i,c,s,r,p=e[13][e[0]],m=[];for(let t=0;t<p.length;t+=1)m[t]=pe(le(e,p,t));return{c(){t=f("input"),n=v(),i=f("div"),c=f("div");for(let e=0;e<m.length;e+=1)m[e].c();$(t,"id",e[8]),$(t,"name",e[10]),t.value=e[11],$(t,"autocomplete","off"),$(t,"aria-autocomplete","list"),$(t,"class","svelte-1dw38tw"),$(c,"class","autocomplete__list"),$(c,"role","listbox"),$(c,"tabindex","-1"),$(i,"class","autocomplete__results")},m(l,u){a(l,t,u),a(l,n,u),a(l,i,u),o(i,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);s||(r=[g(t,"keydown",e[16]),g(t,"input",e[14])],s=!0)},p(e,n){if(256&n&&$(t,"id",e[8]),1024&n&&$(t,"name",e[10]),2048&n&&t.value!==e[11]&&(t.value=e[11]),139809&n){let t;for(p=e[13][e[0]],t=0;t<p.length;t+=1){const l=le(e,p,t);m[t]?m[t].p(l,n):(m[t]=pe(l),m[t].c(),m[t].m(c,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=p.length}},d(e){e&&u(t),e&&u(n),e&&u(i),d(m,e),s=!1,l(r)}}}function ue(e){let t,n,i,c,s,r,p=e[7],m=[];for(let t=0;t<p.length;t+=1)m[t]=he(ie(e,p,t));return{c(){t=f("input"),n=v(),i=f("div"),c=f("div");for(let e=0;e<m.length;e+=1)m[e].c();$(t,"id",e[8]),$(t,"name",e[10]),t.value=e[11],$(t,"autocomplete","off"),$(t,"aria-autocomplete","list"),$(t,"class","svelte-1dw38tw"),$(c,"class","autocomplete__list"),$(c,"role","listbox"),$(c,"tabindex","-1"),$(i,"class","autocomplete__results")},m(l,u){a(l,t,u),a(l,n,u),a(l,i,u),o(i,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);s||(r=[g(t,"keydown",e[16]),g(t,"input",e[14])],s=!0)},p(e,n){if(256&n&&$(t,"id",e[8]),1024&n&&$(t,"name",e[10]),2048&n&&t.value!==e[11]&&(t.value=e[11]),131744&n){let t;for(p=e[7],t=0;t<p.length;t+=1){const l=ie(e,p,t);m[t]?m[t].p(l,n):(m[t]=he(l),m[t].c(),m[t].m(c,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=p.length}},d(e){e&&u(t),e&&u(n),e&&u(i),d(m,e),s=!1,l(r)}}}function de(e){let t,n,l,i,c,s=e[29].name+"";return{c(){t=f("div"),n=m(s),$(t,"class","autocomplete__item svelte-1dw38tw"),$(t,"id",l=`${e[9]}-${e[28]}`),$(t,"role","option"),$(t,"tabindex","-1")},m(l,s){a(l,t,s),o(t,n),i||(c=g(t,"click",e[17]),i=!0)},p(e,i){8193&i&&s!==(s=e[29].name+"")&&y(n,s),512&i&&l!==(l=`${e[9]}-${e[28]}`)&&$(t,"id",l)},d(e){e&&u(t),i=!1,c()}}}function fe(e){let t,n,l,i,c,s=e[29].name+"";return{c(){t=f("div"),n=m(s),$(t,"class","autocomplete__item selected svelte-1dw38tw"),$(t,"aria-selected","true"),$(t,"id",l=`${e[9]}-${e[28]}`),$(t,"role","option"),$(t,"tabindex","-1")},m(l,s){a(l,t,s),o(t,n),i||(c=g(t,"click",e[17]),i=!0)},p(e,i){8193&i&&s!==(s=e[29].name+"")&&y(n,s),512&i&&l!==(l=`${e[9]}-${e[28]}`)&&$(t,"id",l)},d(e){e&&u(t),i=!1,c()}}}function pe(e){let t;function n(e,t){return e[5]===e[28]?fe:de}let l=n(e),i=l(e);return{c(){i.c(),t=h()},m(e,n){i.m(e,n),a(e,t,n)},p(e,c){l===(l=n(e))&&i?i.p(e,c):(i.d(1),i=l(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function me(e){let t,n,l,i,c,s=e[26].agencyName+"";return{c(){t=f("div"),n=m(s),$(t,"class","autocomplete__item svelte-1dw38tw"),$(t,"id",l=`${e[9]}-${e[28]}`),$(t,"role","option"),$(t,"tabindex","-1")},m(l,s){a(l,t,s),o(t,n),i||(c=g(t,"click",e[17]),i=!0)},p(e,i){128&i&&s!==(s=e[26].agencyName+"")&&y(n,s),512&i&&l!==(l=`${e[9]}-${e[28]}`)&&$(t,"id",l)},d(e){e&&u(t),i=!1,c()}}}function ve(e){let t,n,l,i,c,s=e[26].agencyName+"";return{c(){t=f("div"),n=m(s),$(t,"class","autocomplete__item selected svelte-1dw38tw"),$(t,"aria-selected","true"),$(t,"id",l=`${e[9]}-${e[28]}`),$(t,"role","option"),$(t,"tabindex","-1")},m(l,s){a(l,t,s),o(t,n),i||(c=g(t,"click",e[17]),i=!0)},p(e,i){128&i&&s!==(s=e[26].agencyName+"")&&y(n,s),512&i&&l!==(l=`${e[9]}-${e[28]}`)&&$(t,"id",l)},d(e){e&&u(t),i=!1,c()}}}function he(e){let t;function n(e,t){return e[5]===e[28]?ve:me}let l=n(e),i=l(e);return{c(){i.c(),t=h()},m(e,n){i.m(e,n),a(e,t,n)},p(e,c){l===(l=n(e))&&i?i.p(e,c):(i.d(1),i=l(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function ge(e){let t,n,l,i=e[23].name+"";return{c(){t=f("option"),n=m(i),t.__value=l=e[23].abbr,t.value=t.__value},m(e,l){a(e,t,l),o(t,n)},p(e,c){8&c&&i!==(i=e[23].name+"")&&y(n,i),8&c&&l!==(l=e[23].abbr)&&(t.__value=l,t.value=t.__value)},d(e){e&&u(t)}}}function $e(t){let n,l,i,c,s,r=X[t[1]].text+"";function d(e,t){return"select"===e[2]?re:se}let p=d(t),h=p(t);return{c(){n=f("div"),l=f("label"),i=m(r),c=f("span"),s=v(),h.c(),_(c,"optional",!t[4]),_(c,"required",t[4]),$(l,"for",t[8]),$(l,"class","svelte-1dw38tw"),$(n,"class","form__field svelte-1dw38tw")},m(e,t){a(e,n,t),o(n,l),o(l,i),o(l,c),o(n,s),h.m(n,null)},p(e,[t]){2&t&&r!==(r=X[e[1]].text+"")&&y(i,r),16&t&&_(c,"optional",!e[4]),16&t&&_(c,"required",e[4]),256&t&&$(l,"for",e[8]),p===(p=d(e))&&h?h.p(e,t):(h.d(1),h=p(e),h&&(h.c(),h.m(n,null)))},i:e,o:e,d(e){e&&u(n),h.d()}}}function ye(e,t,n){let l,i;r(e,Q,e=>n(19,l=e)),r(e,te,e=>n(13,i=e));let c,s,o,a,u,d,f,p,{idx:m=0}=t,{fieldKey:v="recipientFirstName"}=t,{fieldType:h="text"}=t,{options:g=[]}=t,{required:$=!1}=t,y=[];function b(e){const t=e.target.value;Q.changeItem(l,m,v,t)}async function _(){s?async function(){const e=o[c];for(let t of Object.keys(e))Q.changeItem(l,m,t,e[t]);const t=l[m].foiaEmail.value,i=await fetch("/api/current-user/autocomplete/sources?agency="+t).then(e=>e.json()).then(e=>e.results).catch(e=>{console.error(e)});te.newSources(m,i),n(18,y=[]),n(5,c=void 0)}():function(){const e=i[m][c];Q.changeItem(l,m,"recipientFirstName",e.firstName),Q.changeItem(l,m,"recipientLastName",e.lastName),te.newSources(m,[]),n(5,c=void 0)}()}return e.$$set=e=>{"idx"in e&&n(0,m=e.idx),"fieldKey"in e&&n(1,v=e.fieldKey),"fieldType"in e&&n(2,h=e.fieldType),"options"in e&&n(3,g=e.options),"required"in e&&n(4,$=e.required)},e.$$.update=()=>{2&e.$$.dirty&&n(6,s=v.startsWith("agency")||"foiaEmail"===v),262144&e.$$.dirty&&n(7,o=y.slice(0,5)),3&e.$$.dirty&&n(8,a=`id_${v}-${m}`),3&e.$$.dirty&&n(9,u=`autocomplete_${v}-${m}`),3&e.$$.dirty&&n(10,d=`${v}-${m}`),524291&e.$$.dirty&&n(11,f=l[m][v].value),2060&e.$$.dirty&&n(12,p="select"===h&&g.length>0&&""===f?g[0].abbr:f)},[m,v,h,g,$,c,s,o,a,u,d,f,p,i,async function(e){if(b(e),s){let t="/api/current-user/autocomplete/agencies";const l=await fetch(`${t}?field=${v}&q=${e.target.value}`).then(e=>e.json()).then(e=>e.results).catch(e=>{console.error(e)});n(18,y=""===e.target.value?[]:l)}},b,async function(e){switch(e.key){case"ArrowDown":void 0===c?n(5,c=0):c<o.length-1?n(5,c+=1):n(5,c=void 0);break;case"ArrowUp":n(5,void 0===c?c=o.length-1:0===c?c=void 0:c-=1);break;case"Enter":void 0!==c&&_()}},async function(e){n(5,c=parseInt(e.target.id.match(/[0-9]$/g))),_()}]}class be extends U{constructor(e){super(),D(this,e,ye,$e,c,{idx:0,fieldKey:1,fieldType:2,options:3,required:4})}}function _e(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function xe(e){let t,n;return t=new be({props:{idx:e[0],fieldKey:"agencyState",fieldType:"select",required:!0,options:e[12]}}),{c(){W(t.$$.fragment)},m(e,l){B(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.idx=e[0]),2&n&&(l.options=e[12]),t.$set(l)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function we(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ke(e){let t,n,l,i,c,s,r,d;return{c(){t=f("button"),n=p("svg"),l=p("title"),i=m("Add New Item"),c=p("path"),$(c,"fill-rule","evenodd"),$(c,"d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"),$(c,"clip-rule","evenodd"),$(n,"role","img"),$(n,"width","25px"),$(n,"viewBox","0 0 20 20"),$(n,"fill","currentColor"),$(n,"class","plus w-6 h-6"),$(t,"id",s="add-"+e[0]),$(t,"class","svelte-643hy8")},m(s,u){a(s,t,u),o(t,n),o(n,l),o(l,i),o(n,c),r||(d=g(t,"click",e[6]),r=!0)},p(e,n){1&n&&s!==(s="add-"+e[0])&&$(t,"id",s)},d(e){e&&u(t),r=!1,d()}}}function qe(e){let t,n,l,c,s,r,d,v;return{c(){t=f("button"),n=p("svg"),l=p("title"),c=m("Delete This Item"),s=p("path"),$(s,"fill-rule","evenodd"),$(s,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),$(s,"clip-rule","evenodd"),$(n,"role","img"),$(n,"width","25px"),$(n,"viewBox","0 0 20 20"),$(n,"fill","currentColor"),$(n,"class","x w-6 h-6"),$(t,"id",r="delete-"+e[0]),$(t,"class","svelte-643hy8")},m(r,u){a(r,t,u),o(t,n),o(n,l),o(l,c),o(n,s),d||(v=g(t,"click",(function(){i(e[7](e[0]))&&e[7](e[0]).apply(this,arguments)})),d=!0)},p(n,l){e=n,1&l&&r!==(r="delete-"+e[0])&&$(t,"id",r)},d(e){e&&u(t),d=!1,v()}}}function Ne(e){let t,n,l,i,c,s,r,d,p;return{c(){t=f("button"),n=m("Hide Preview"),i=v(),c=f("div"),s=m(e[2]),$(t,"id",l="expand-"+e[0]),$(t,"class","svelte-643hy8"),$(c,"id",r="template-"+e[0]),$(c,"class","template__preview svelte-643hy8")},m(l,r){a(l,t,r),o(t,n),a(l,i,r),a(l,c,r),o(c,s),d||(p=g(t,"click",e[5]),d=!0)},p(e,n){1&n&&l!==(l="expand-"+e[0])&&$(t,"id",l),4&n&&y(s,e[2]),1&n&&r!==(r="template-"+e[0])&&$(c,"id",r)},d(e){e&&u(t),e&&u(i),e&&u(c),d=!1,p()}}}function je(e){let t,n,l,i,c,s,r,d,p;return{c(){t=f("button"),n=m("Preview Request"),i=v(),c=f("div"),s=m(e[2]),$(t,"id",l="expand-"+e[0]),$(t,"class","svelte-643hy8"),$(c,"id",r="template-"+e[0]),$(c,"class","template__preview hidden svelte-643hy8")},m(l,r){a(l,t,r),o(t,n),a(l,i,r),a(l,c,r),o(c,s),d||(p=g(t,"click",e[5]),d=!0)},p(e,n){1&n&&l!==(l="expand-"+e[0])&&$(t,"id",l),4&n&&y(s,e[2]),1&n&&r!==(r="template-"+e[0])&&$(c,"id",r)},d(e){e&&u(t),e&&u(i),e&&u(c),d=!1,p()}}}function Ie(e){let t,n,l,i,c,s,r,d,p,m,h,g,y,b,_,x,w,k,q,N,j,I,E,L,S,R,A,O;l=new be({props:{idx:e[0],fieldKey:"recipientFirstName"}}),c=new be({props:{idx:e[0],fieldKey:"recipientLastName"}}),d=new be({props:{idx:e[0],fieldKey:"agencyName"}}),m=new be({props:{idx:e[0],fieldKey:"foiaEmail",fieldType:"email",required:!0}});let z={ctx:e,current:null,token:null,pending:we,then:xe,catch:_e,value:12,blocks:[,,,]};H(g=e[1],z),_=new be({props:{idx:e[0],fieldKey:"agencyStreetAddress"}}),w=new be({props:{idx:e[0],fieldKey:"agencyZip"}}),q=new be({props:{idx:e[0],fieldKey:"agencyMunicipality"}});let P=e[0]===e[4]-1&&ke(e),T=e[4]>1&&qe(e);function C(e,t){return e[3]?Ne:je}let K=C(e),Z=K(e);return{c(){t=f("div"),n=f("div"),W(l.$$.fragment),i=v(),W(c.$$.fragment),s=v(),r=f("div"),W(d.$$.fragment),p=v(),W(m.$$.fragment),h=v(),z.block.c(),y=v(),b=f("div"),W(_.$$.fragment),x=v(),W(w.$$.fragment),k=v(),W(q.$$.fragment),N=v(),j=f("div"),I=f("div"),P&&P.c(),E=v(),L=f("div"),T&&T.c(),S=v(),R=f("div"),Z.c(),$(n,"class","recipient__person"),$(r,"class","agency__general svelte-643hy8"),$(b,"class","agency__street svelte-643hy8"),$(I,"class","add__item"),$(L,"class","delete__item"),$(j,"class","new__items svelte-643hy8"),$(R,"class","expand__preview svelte-643hy8"),$(t,"class","recipient__item svelte-643hy8"),$(t,"id",A="recipient-"+e[0])},m(e,u){a(e,t,u),o(t,n),B(l,n,null),o(n,i),B(c,n,null),o(t,s),o(t,r),B(d,r,null),o(r,p),B(m,r,null),o(r,h),z.block.m(r,z.anchor=null),z.mount=()=>r,z.anchor=null,o(t,y),o(t,b),B(_,b,null),o(b,x),B(w,b,null),o(b,k),B(q,b,null),o(t,N),o(t,j),o(j,I),P&&P.m(I,null),o(j,E),o(j,L),T&&T.m(L,null),o(t,S),o(t,R),Z.m(R,null),O=!0},p(n,[i]){e=n;const s={};1&i&&(s.idx=e[0]),l.$set(s);const r={};1&i&&(r.idx=e[0]),c.$set(r);const o={};1&i&&(o.idx=e[0]),d.$set(o);const a={};if(1&i&&(a.idx=e[0]),m.$set(a),z.ctx=e,2&i&&g!==(g=e[1])&&H(g,z));else{const t=e.slice();t[12]=z.resolved,z.block.p(t,i)}const u={};1&i&&(u.idx=e[0]),_.$set(u);const f={};1&i&&(f.idx=e[0]),w.$set(f);const p={};1&i&&(p.idx=e[0]),q.$set(p),e[0]===e[4]-1?P?P.p(e,i):(P=ke(e),P.c(),P.m(I,null)):P&&(P.d(1),P=null),e[4]>1?T?T.p(e,i):(T=qe(e),T.c(),T.m(L,null)):T&&(T.d(1),T=null),K===(K=C(e))&&Z?Z.p(e,i):(Z.d(1),Z=K(e),Z&&(Z.c(),Z.m(R,null))),(!O||1&i&&A!==(A="recipient-"+e[0]))&&$(t,"id",A)},i(e){O||(M(l.$$.fragment,e),M(c.$$.fragment,e),M(d.$$.fragment,e),M(m.$$.fragment,e),M(z.block),M(_.$$.fragment,e),M(w.$$.fragment,e),M(q.$$.fragment,e),O=!0)},o(e){F(l.$$.fragment,e),F(c.$$.fragment,e),F(d.$$.fragment,e),F(m.$$.fragment,e);for(let e=0;e<3;e+=1){F(z.blocks[e])}F(_.$$.fragment,e),F(w.$$.fragment,e),F(q.$$.fragment,e),O=!1},d(e){e&&u(t),J(l),J(c),J(d),J(m),z.block.d(),z.token=null,z=null,J(_),J(w),J(q),P&&P.d(),T&&T.d(),Z.d()}}}function Ee(e,t,n){let l,i,c;r(e,Q,e=>n(8,l=e)),r(e,ne,e=>n(9,i=e)),r(e,ee,e=>n(4,c=e));let{idx:s=0}=t,o="",a=!1,{states:u}=t;async function d(e){const t="/api/current-user/template/"+document.getElementById("id_agencyState-"+s).value,c=function(){let e={};for(const t of Object.keys(l[s]))e[t]=l[s][t].value;for(const t of Object.keys(i))e[t]=i[t].value;const t=`${e.recipientFirstName} ${e.recipientLastName}`;return e.recipientName=""===t.trim()?"Public Records Officer":t.trim(),e}();let r=await fetch(t).then(e=>e.json()).then(e=>function(e,t){let n=0,l="";for(let i of t.template){l+=t.boilerplate.slice(n,i.position);const c=e[i.field];l+=void 0===c?t[i.field]:c,n=i.position}return l+=t.boilerplate.slice(n,t.boilerplate.length),l}(c,e)).catch(e=>{console.error(e)});n(2,o=r)}return e.$$set=e=>{"idx"in e&&n(0,s=e.idx),"states"in e&&n(1,u=e.states)},[s,u,o,a,c,async function(e){n(3,a=!a),a&&d()},function(){Q.addItem(),te.addItem()},function(){Q.deleteItem(s),te.deleteItem(s)}]}class Le extends U{constructor(e){super(),D(this,e,Ee,Ie,c,{idx:0,states:1})}}function Se(t){let n,i,c,s,r,d,p,m,h,y,b,_,x,w,k,q,N,j,I,E,L,S;return{c(){n=f("div"),i=f("div"),c=f("label"),c.innerHTML='Subject<span class="required"></span>',s=v(),r=f("input"),d=v(),p=f("div"),m=f("label"),m.innerHTML='Records Sought<span class="required"></span>',h=v(),y=f("textarea"),b=v(),_=f("div"),x=f("label"),x.innerHTML='Fee Waiver Justification<span class="optional svelte-1enplz5"></span>',w=v(),k=f("textarea"),q=v(),N=f("div"),j=f("label"),j.innerHTML='Justification for Expedited Processing<span class="optional svelte-1enplz5"></span>',I=v(),E=f("textarea"),$(c,"for","id_subject-line"),$(c,"class","svelte-1enplz5"),$(r,"type","text"),$(r,"id","id_subject"),$(r,"name","subject"),$(r,"class","svelte-1enplz5"),$(i,"class","subject__line"),$(m,"for","id_requestedRecords"),$(m,"class","svelte-1enplz5"),$(y,"id","id_requestedRecords"),$(y,"name","requestedRecords"),$(y,"class","svelte-1enplz5"),$(p,"class","records"),$(x,"for","id_feeWaiver"),$(x,"class","svelte-1enplz5"),$(k,"id","id_feeWaiver"),$(k,"name","feeWaiver"),$(k,"class","svelte-1enplz5"),$(_,"class","fee-waiver"),$(j,"for","id_expeditedProcessing"),$(j,"class","svelte-1enplz5"),$(E,"id","id_expeditedProcessing"),$(E,"name","expeditedProcessing"),$(E,"class","svelte-1enplz5"),$(N,"class","expedited-processing"),$(n,"id","request"),$(n,"class","request__container svelte-1enplz5")},m(e,l){a(e,n,l),o(n,i),o(i,c),o(i,s),o(i,r),o(n,d),o(n,p),o(p,m),o(p,h),o(p,y),o(n,b),o(n,_),o(_,x),o(_,w),o(_,k),o(n,q),o(n,N),o(N,j),o(N,I),o(N,E),L||(S=[g(r,"input",t[2]),g(y,"input",t[3]),g(k,"input",t[4]),g(E,"input",t[5])],L=!0)},p:e,i:e,o:e,d(e){e&&u(n),L=!1,l(S)}}}function Re(e){function t(e,t){ne.update(n=>(n[t].value=e.target.value,n))}function n(e,n){t(e,n),function(e){const t=e.target;t.clientHeight<t.scrollHeight&&(t.style.height=t.scrollHeight+20+"px")}(e)}return[t,n,e=>t(e,"subject"),e=>n(e,"requestedRecords"),e=>n(e,"feeWaiver"),e=>n(e,"expeditedProcessing")]}class Ae extends U{constructor(e){super(),D(this,e,Re,Se,c,{})}}function Oe(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function ze(e){let t,n,l={ctx:e,current:null,token:null,pending:Ce,then:Te,catch:Pe,value:8,error:9};return H(n=e[0],l),{c(){t=h(),l.block.c()},m(e,n){a(e,t,n),l.block.m(e,l.anchor=n),l.mount=()=>t.parentNode,l.anchor=t},p(t,i){e=t,l.ctx=e,1&i&&n!==(n=e[0])&&H(n,l)},d(e){e&&u(t),l.block.d(e),l.token=null,l=null}}}function Pe(e){let t;return{c(){t=f("p"),t.textContent="Could not process file. Make sure it is a .csv file with the correct fields."},m(e,n){a(e,t,n)},d(e){e&&u(t)}}}function Te(e){let t;return{c(){t=f("p"),t.textContent="Finished"},m(e,n){a(e,t,n)},d(e){e&&u(t)}}}function Ce(e){let t;return{c(){t=f("p"),t.textContent="Loading"},m(e,n){a(e,t,n)},d(e){e&&u(t)}}}function Ke(t){let n,l;return n=new Le({props:{states:t[3],idx:t[7]}}),{c(){W(n.$$.fragment)},m(e,t){B(n,e,t),l=!0},p:e,i(e){l||(M(n.$$.fragment,e),l=!0)},o(e){F(n.$$.fragment,e),l=!1},d(e){J(n,e)}}}function Me(e){let t,n,l,i,c,s,r,p,m,h,y,b,_,x,w,k,q,N,j,I,E,L,S;c=new Ae({});let R=void 0!==e[0]&&ze(e),A=e[1],O=[];for(let t=0;t<A.length;t+=1)O[t]=Ke(Oe(e,A,t));const z=e=>F(O[e],1,1,()=>{O[e]=null});return{c(){t=f("div"),n=f("div"),l=f("h2"),l.textContent="Information about the Request",i=v(),W(c.$$.fragment),s=v(),r=f("div"),p=f("h2"),p.textContent="Information about the Recipients",m=v(),h=f("p"),h.textContent="You can manually add the agencies or you can upload a CSV.",y=v(),b=f("div"),_=f("input"),x=v(),w=f("div"),R&&R.c(),k=v();for(let e=0;e<O.length;e+=1)O[e].c();q=v(),N=f("input"),j=v(),I=f("div"),I.innerHTML='<div class="submit__item svelte-12pq4cw"><input type="submit" name="send-requests" id="id_send-requests" value="Send Requests" class="svelte-12pq4cw"></div> \n\t\t<div class="submit__item svelte-12pq4cw"><input type="submit" name="schedule-requests" id="id_schedule-requests" value="Schedule Requests" class="svelte-12pq4cw"></div> \n\t\t<div class="submit__item svelte-12pq4cw"><input type="submit" name="save-requests" id="id_save-requests" value="Save Requests" class="svelte-12pq4cw"></div>',$(l,"class","svelte-12pq4cw"),$(n,"class","section__container svelte-12pq4cw"),$(p,"class","svelte-12pq4cw"),$(h,"class","svelte-12pq4cw"),$(_,"type","file"),$(_,"id","csv_upload"),$(_,"accept",".csv"),$(_,"class","svelte-12pq4cw"),$(w,"class","upload__info"),$(b,"class","upload__container svelte-12pq4cw"),$(N,"type","hidden"),$(N,"name","num-items"),N.value=e[2],$(r,"class","section__container svelte-12pq4cw"),$(I,"class","submit__container svelte-12pq4cw"),$(t,"class","form__container svelte-12pq4cw")},m(u,d){a(u,t,d),o(t,n),o(n,l),o(n,i),B(c,n,null),o(t,s),o(t,r),o(r,p),o(r,m),o(r,h),o(r,y),o(r,b),o(b,_),o(b,x),o(b,w),R&&R.m(w,null),o(r,k);for(let e=0;e<O.length;e+=1)O[e].m(r,null);o(r,q),o(r,N),o(t,j),o(t,I),E=!0,L||(S=g(_,"change",e[4]),L=!0)},p(e,[t]){if(void 0!==e[0]?R?R.p(e,t):(R=ze(e),R.c(),R.m(w,null)):R&&(R.d(1),R=null),10&t){let n;for(A=e[1],n=0;n<A.length;n+=1){const l=Oe(e,A,n);O[n]?(O[n].p(l,t),M(O[n],1)):(O[n]=Ke(l),O[n].c(),M(O[n],1),O[n].m(r,q))}for(C(),n=A.length;n<O.length;n+=1)z(n);K()}(!E||4&t)&&(N.value=e[2])},i(e){if(!E){M(c.$$.fragment,e);for(let e=0;e<A.length;e+=1)M(O[e]);E=!0}},o(e){F(c.$$.fragment,e),O=O.filter(Boolean);for(let e=0;e<O.length;e+=1)F(O[e]);E=!1},d(e){e&&u(t),J(c),R&&R.d(),d(O,e),L=!1,S()}}}function Fe(e,t,n){let l,i;r(e,Q,e=>n(1,l=e)),r(e,ee,e=>n(2,i=e));let c,s=fetch("/api/current-user/states").then(e=>e.json()).then(e=>e.states).catch(e=>{console.error(e)});return[c,l,i,s,async function(e){let t=e.target.files[0],i=l.length-1;const s=new Promise((e,n)=>{Papa.parse(t,{header:!0,skipEmptyLines:!0,step(e,t){Object.keys(e.data).every(e=>Object.keys(X).includes(e))?Object.values(l[i]).every(e=>""===e.value)||(i+=1,Q.addItem(),te.addItem()):n(new Error("invalid field"));for(let t of Object.keys(e.data))Q.changeItem(l,i,t,e.data[t])},complete(t,n){e()},error(e,t){n(e)}})});n(0,c=s)}]}return new class extends U{constructor(e){super(),D(this,e,Fe,Me,c,{})}}({target:document.getElementById("foia-request-items")})}();
//# sourceMappingURL=foia-request.js.map
